<!doctype html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quiz</title>

    <style>
      body {
        margin: 0;
        font-family: Arial, sans-serif;
        background: #01000d;
        display: flex;
        justify-content: center;
        align-items: flex-end;
        min-height: 100dvh;
        background-image: url(img/bg.webp);
        background-position: top center;
        background-size: contain;
        background-repeat: no-repeat;
      }

      #quiz {
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .quiz-container {
        width: 60%;
        background: #00003f;
        padding: 20px;
        box-sizing: border-box;
        border-radius: 12px;
        box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);
        position: relative;
        z-index: 2;
        border: 5px solid #0f62e6;
        margin-bottom: 40px;
        display: flex;
        flex-direction: column;
        align-items: center;
      }

      .quiz-image {
        width: 100%;
        height: 500px;
        object-fit: contain;
        object-position: top;
        border-radius: 8px;
      }

      .quiz-question {
        margin: 20px 0;
        font-size: 20px;
        text-align: center;
        color: #fff;
      }

      .answers {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 10px;
      }

      .answer {
        padding: 20px;
        background: linear-gradient(to bottom right, #000b64, #012796);
        border-radius: 8px;
        cursor: pointer;
        text-align: center;
        transition: 0.2s;
        color: #fff;
      }

      .answer:hover {
        background: #f8a63a;
      }

      .answer.selected {
        background: #4caf50;
        color: #fff;
      }

      .timer {
        margin: 15px 0;
        text-align: center;
        font-weight: bold;
        font-size: 18px;
        color: #fff;
      }

      .next-btn {
        width: 200px;
        margin: 0 auto;
        padding: 20px;
        background: linear-gradient(to bottom right, #000b64, #012796);
        color: #fff;
        border: none;
        border-radius: 8px;
        cursor: pointer;
        font-size: 16px;
      }

      .result {
        text-align: center;
        font-size: 22px;
        color: #fff;
      }

      canvas#confetti {
        position: fixed;
        top: 0;
        left: 0;
        pointer-events: none;
        width: 100%;
        height: 100%;
        z-index: 1;
      }

      @media (max-width: 600px) {
        body {
          background-size: 700px;
        }

        .answers {
          grid-template-columns: 1fr;
        }

        .quiz-image {
          height: 180px;
        }

        .quiz-container {
          width: 90%;
          margin-top: 300px;
        }

        .quiz-question {
          font-size: 18px;
        }
      }
    </style>
  </head>

  <body>
    <canvas id="confetti"></canvas>

    <div class="quiz-container">
      <div id="quiz"></div>
    </div>

    <audio id="questionSound" src="sound/sound.mp3"></audio>

    <script>
      const quizWrapper = document.querySelector(".quiz-container");
      const questionSound = document.getElementById("questionSound");

      function playSound() {
        questionSound.currentTime = 0;
        questionSound.play().catch(() => {});
      }

      function stopSound() {
        questionSound.pause();
        questionSound.currentTime = 0;
      }

      const questions = [
        {
          image: "https://picsum.photos/800/600",
          question:
            "–ö—Ç–æ –≥–ª–∞–≤–Ω—ã–π —Å—Ç—Ä–∞—Ç–µ–≥ –∏ –≤–¥–æ—Ö–Ω–æ–≤–∏—Ç–µ–ª—å –û–û–û ¬´–≠–ª—Ç–µ–∫—Å –ö–æ–º–º—É–Ω–∏–∫–∞—Ü–∏–∏¬ª?",
          answers: [
            "–ò–≤–∞–Ω –°–∞–º–æ–π–ª–æ–≤",
            "–ò–≤–∞–Ω –ï—Ä–µ–º–∏–Ω",
            "–î–º–∏—Ç—Ä–∏–π –ù–µ—á–∫–∞—Å–æ–≤",
            "–î–º–∏—Ç—Ä–∏–π –§–∞–¥–∏–Ω",
          ],
          correct: 1,
        },
        {
          image: "https://picsum.photos/800/600",
          question: "–ö—Ç–æ –≥–ª–∞–≤–Ω—ã–π —Å—ã—â–∏–∫ –≤ –∫–æ–º–ø–∞–Ω–∏–∏?",
          answers: [
            "–ò–ª—å—è –®–∞—è—Ö–º–µ—Ç–æ–≤",
            "–ê—Ä—Ç–µ–º –¢—Ä–∏—Ñ–æ–Ω–æ–≤",
            "–ò–ª—å—è –ù–∞–ø–æ–ª–æ–≤",
            "–ö–∏—Ä–∏–ª–ª –°–∏–∑–æ–≤",
          ],
          correct: 0,
        },
        {
          question: "–ö—Ç–æ –≥–ª–∞–≤–Ω—ã–π —Ä—ã—Ü–∞—Ä—å –æ—Ñ–∏—Å–∞?",
          answers: [
            "–ê–ª–µ–∫—Å–µ–π –ë—É–π–Ω–∏—á",
            "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –î—É–Ω–∞–µ–≤",
            "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –°—É—Ç—É–ª–∞",
            "–†–æ–º–∞–Ω –ö–æ—Ç—Ä—É–Ω–æ–≤",
          ],
          correct: 3,
        },
        {
          question: "–ì–ª–∞–≤–Ω—ã–π –ª—é–±–∏—Ç–µ–ª—å –∫—Ä–∞—Å–Ω—ã—Ö —à–∞–ø–æ—á–µ–∫?",
          answers: [
            "–í–∞–¥–∏–º –ó–∞—Ö–∞—Ä–æ–≤",
            "–ê–ª–µ–∫—Å–µ–π –†–µ–ø—å—é–∫",
            "–ú–∞–∫—Å–∏–º –ë–µ–∫–µ—Ç–æ–≤",
            "–ü–æ–ª–∏–Ω–∞ –ú–æ—Å–∫–∞–ª–µ–≤–∞",
          ],
          correct: 2,
        },
        {
          question:
            "–°–æ—Ç—Ä—É–¥–Ω–∏–∫, –∫–æ—Ç–æ—Ä—ã–π –¥—É—à—É –¥—å—è–≤–æ–ª—É –ø—Ä–æ–¥–∞—Å—Ç –∑–∞ –π–æ–≥—É—Ä—Ç —ç–∫—Å–ø–æ–Ω–µ–Ω—Ç–∞?",
          answers: [
            "–ù–∏–∫–∏—Ç–∞ –°–∏–¥–æ—Ä–µ–Ω–∫–æ",
            "–ó–∞—Ö–∞—Ä –ë—Ä–∞—É–Ω",
            "–ò–≤–∞–Ω –°–∞–º–æ–π–ª–æ–≤",
            "–ê–ª–µ–∫—Å –°–æ–ª–æ–º–∞—Ç–∏–Ω",
          ],
          correct: 0,
        },
        {
          question: "–ö—Ç–æ —Å–∞–º—ã–π —Å–≤—è—Ç–æ–π —á–µ–ª–æ–≤–µ–∫ –≤ –æ—Ñ–∏—Å–µ?",
          answers: [
            "–ï–≤–≥–µ–Ω–∏–π –£–¥–∞—Ä—Ü–µ–≤",
            "–ì—Ä–∏–≥–æ—Ä–∏–π –ö–∞–º—ã—à–Ω–∏–∫–æ–≤",
            "–Æ–ª–∏—è –ö–æ–Ω–µ–≤–∞",
            "–ï–≤–≥–µ–Ω–∏–π –ê–∫–∏–º–µ–Ω–∫–æ",
          ],
          correct: 3,
        },
        {
          question: "–ö—Ç–æ —Å–∞–º—ã–π —Å–ª–∞–¥–∫–∏–π —á–µ–ª–æ–≤–µ–∫ –≤ –æ—Ñ–∏—Å–µ?",
          answers: [
            "–ù–∞—Ç–∞–ª—å—è –ë–æ—Ä–æ–≤–µ—Ü",
            "–ê–Ω–∞—Ç–æ–ª–∏–π –ú–æ–Ω—Ç–æ–µ–≤",
            "–ú–∞–∫—Å–∏–º –ë—É–±–µ–Ω–æ–≤",
            "–ó–∞—Ö–∞—Ä –ë—Ä–∞—É–Ω",
          ],
          correct: 3,
        },
        {
          question: "–î–≤–æ–π–Ω–∏–∫ –ö–∏–º –ß–µ–Ω –´–Ω–∞?",
          answers: [
            "–ê–Ω—Ç–æ–Ω –ì—É—Ç–æ–≤",
            "–ê–ª–µ–∫—Å–µ–π –ë—É–π–Ω–∏—á",
            "–ú–∏—Ö–∞–∏–ª –ú–æ—Å–∏–Ω",
            "–ê–Ω—Ç–æ–Ω –†–µ–∫—É–Ω",
          ],
          correct: 1,
        },
        {
          question: "–†–∞–ø—É–Ω—Ü–µ–ª—å –æ—Ñ–∏—Å–∞?",
          answers: [
            "–í–∏–∫—Ç–æ—Ä–∏—è –ú–µ–¥–≤–µ–¥–Ω–∏–∫–æ–≤–∞",
            "–Æ–ª–∏—è –ö–æ–Ω–µ–≤–∞",
            "–Æ–ª–∏—è –ü–æ–¥–∫–æ—Ä—ã—Ç–æ–≤–∞",
            "–ö—Å–µ–Ω–∏—è –î–∞—à–∫–∏–Ω–∞",
          ],
          correct: 1,
        },
        {
          question: "–°–∞–º—ã–π –æ–ø—ã—Ç–Ω—ã–π —Å–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—Ñ–∏—Å–∞ (—Ä–∞–±–æ—Ç–∞–µ—Ç –±–æ–ª–µ–µ 12 –ª–µ—Ç)?",
          answers: [
            "–î–º–∏—Ç—Ä–∏–π –ù–µ—á–∫–∞—Å–æ–≤",
            "–ï–≤–≥–µ–Ω–∏–π –ú–∞–∫–∞—Ä–µ–≤–∏—á",
            "–ï–≤–≥–µ–Ω–∏–π –ê–∫–∏–º–µ–Ω–∫–æ",
            "–ú–∞—Ä–∫ –ü–ª–∏—Å–∞–∫",
          ],
          correct: 3,
        },
        {
          question: "¬´–í–∞–ª–µ–Ω—Ç–∏–Ω–∞ –¢–µ—Ä–µ—à–∫–æ–≤–∞¬ª –æ—Ñ–∏—Å–∞?",
          answers: [
            "–ö—Å–µ–Ω–∏—è –î–∞—à–∫–∏–Ω–∞",
            "–ï–ª–µ–Ω–∞ –í–µ—Å–µ–ª–æ–≤–∞",
            "–í–∏–∫—Ç–æ—Ä–∏—è –ö–∞—Ä–ª–∏–Ω–∞",
            "–ï–∫–∞—Ç–µ—Ä–∏–Ω–∞ –õ–æ–º–æ–Ω–æ—Å–æ–≤–∞",
          ],
          correct: 0,
        },
        {
          question: "–ü—Ç–µ–Ω–µ—Ü, –≤—ã–ø–∞–≤—à–∏–π –∏–∑ –≥–Ω–µ–∑–¥–∞, –Ω–æ —Å—Ç–æ–π–∫–æ –ø–∞—Ä—è—â–∏–π –≤ –Ω–µ–±–µ?",
          answers: [
            "–ò–ª—å—è –®–∞—è—Ö–º–µ—Ç–æ–≤",
            "–î–º–∏—Ç—Ä–∏–π –ö–æ–∑–ª–æ–≤",
            "–°–µ—Ä–≥–µ–π –ü–µ—Ä–µ–¥–µ—Ä–∏–Ω",
            "–ò–≤–∞–Ω –°–∞–º–æ–π–ª–æ–≤",
          ],
          correct: 2,
        },
        {
          question: "–°–æ—Ç—Ä—É–¥–Ω–∏–∫ ¬´–æ–¥–Ω–∞ –Ω–æ–≥–∞ –∑–¥–µ—Å—å ‚Äì –¥—Ä—É–≥–∞—è —Ç–∞–º¬ª?",
          answers: [
            "–í–∞–¥–∏–º –ó–∞—Ö–∞—Ä–æ–≤",
            "–ö–∏—Ä–∏–ª–ª –°–∏–∑–æ–≤",
            "–î–µ–Ω–∏—Å –Ø–º–∞–Ω–≥–∞—Ä–∏–Ω",
            "–ê–ª–µ–∫—Å–µ–π –†–µ–ø—å—é–∫",
          ],
          correct: 0,
        },
        {
          question: "–ì–ª–∞–≤–Ω—ã–π –≥—Ä–æ—Å—Å–º–µ–π—Å—Ç–µ—Ä?",
          answers: [
            "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –°—É—Ç—É–ª–∞",
            "–Ø–Ω–∞ –®–∞–¥–∏–µ–≤–∞",
            "–ú–∏—Ö–∞–∏–ª –ú–æ—Å–∏–Ω",
            "–ê–Ω–∞—Ç–æ–ª–∏–π –ú–æ–Ω—Ç–æ–µ–≤",
          ],
          correct: 3,
        },
        {
          question: "–ß–∞–π–Ω—ã–π —Å–æ–º–µ–ª—å–µ –æ—Ñ–∏—Å–∞?",
          answers: [
            "–°–µ—Ä–≥–µ–π –ü–µ—Ä–µ–¥–µ—Ä–∏–Ω",
            "–ú–∞—Ä–≥–∞—Ä–∏—Ç–∞ –ö–∏—Ä–∏–ª–ª–æ–≤–∞",
            "–ú–∞–∫—Å–∏–º –ë—É–±–µ–Ω–æ–≤",
            "–î–º–∏—Ç—Ä–∏–π –ö–æ–∑–ª–æ–≤",
          ],
          correct: 1,
        },
        {
          question: "–ú–∏—Å—Ç–µ—Ä ¬´–Ω—è–º—Å¬ª?",
          answers: [
            "–ê–ª–µ–∫—Å–µ–π –õ–∞—Ä–∏–Ω",
            "–ù–∏–∫–∏—Ç–∞ –°–∏–¥–æ—Ä–µ–Ω–∫–æ",
            "–ê–ª–µ–∫—Å–µ–π –ü–æ–ª–µ–≤",
            "–ì—Ä–∏–≥–æ—Ä–∏–π –ö–∞–º—ã—à–Ω–∏–∫–æ–≤",
          ],
          correct: 2,
        },
        {
          question: "–ì–ª–∞–≤–Ω—ã–π –ª—é–±–∏—Ç–µ–ª—å –∑–≤–µ–∑–¥–Ω—ã—Ö –≤–æ–π–Ω",
          answers: [
            "–ú–∞–∫—Å–∏–º –ë–µ–∫–µ—Ç–æ–≤",
            "–ò–≤–∞–Ω –°–∞–º–æ–π–ª–æ–≤",
            "–ê–ª–µ–∫—Å–µ–π –†–µ–ø—å—é–∫",
            "–î–∞—Ä—å—è –ë–∞–¥–µ—Ä",
          ],
          correct: 2,
        },
        {
          question: "–ì–ª–∞–≤–Ω—ã–π –ª—é–±–∏—Ç–µ–ª—å –∫–æ—Ç–∏–∫–æ–≤?",
          answers: [
            "–ú–∏—Ö–∞–∏–ª –ú–æ—Å–∏–Ω",
            "–ê–ª–µ–∫—Å–∞–Ω–¥—Ä –î—É–Ω–∞–µ–≤",
            "–î–º–∏—Ç—Ä–∏–π –ö–æ–∑–ª–æ–≤",
            "–í–∏–∫—Ç–æ—Ä–∏—è –ö–∞—Ä–ª–∏–Ω–∞",
          ],
          correct: 1,
        },
        {
          question: "–°–æ—Ç—Ä—É–¥–Ω–∏–∫, —É –∫–æ—Ç–æ—Ä–æ–≥–æ –≤–µ—á–Ω–æ –º–µ—Ä–∑–Ω—É—Ç –Ω–æ–∂–∫–∏?",
          answers: [
            "–Æ–ª–∏—è –ö–æ–Ω–µ–≤–∞",
            "–ï–≤–≥–µ–Ω–∏–π –ú–∞–∫–∞—Ä–µ–≤–∏—á",
            "–ê–Ω–∞—Ç–æ–ª–∏–π –ú–æ–Ω—Ç–æ–µ–≤",
            "–ï–≤–≥–µ–Ω–∏–π –£–¥–∞—Ä—Ü–µ–≤",
          ],
          correct: 1,
        },
        {
          question: "–°–∞–º—ã–π –∫–ª–∞—Å—Å–Ω—ã–π –∫–æ–ø–∏—Ä–∞–π—Ç–µ—Ä (–ø–∏—Å–∞—Ä—å) –æ–±—â–µ–≥–æ —á–∞—Ç–∞?",
          answers: [
            "–ê–ª–µ–∫—Å –°–æ–ª–æ–º–∞—Ç–∏–Ω",
            "–î–º–∏—Ç—Ä–∏–π –ö–æ—Ä–æ–ª–µ–≤—Å–∫–∏–π",
            "–ò–ª—å—è –®–∞—è—Ö–º–µ—Ç–æ–≤",
            "–°–µ—Ä–≥–µ–π –ü–µ—Ä–µ–¥–µ—Ä–∏–Ω",
          ],
          correct: 1,
        },
      ];

      let currentQuestion = 0;
      let score = 0;
      let selectedAnswer = null;
      let timerInterval;
      let timeLeft = 20;

      const quizContainer = document.getElementById("quiz");

      function showStartScreen() {
        quizContainer.innerHTML = `
    <div class="result">
      <h2>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –∫–≤–∏–∑ üéâ</h2>
      <p>–£ –≤–∞—Å –µ—Å—Ç—å 20 —Å–µ–∫—É–Ω–¥ –Ω–∞ –∫–∞–∂–¥—ã–π –≤–æ–ø—Ä–æ—Å.</p>
      <button class="next-btn" id="startBtn">–ù–∞—á–∞—Ç—å</button>
    </div>
  `;

        document
          .getElementById("startBtn")
          .addEventListener("click", startQuiz);
      }

      function startQuiz() {
        currentQuestion = 0;
        score = 0;

        if (window.innerWidth <= 600) {
          quizWrapper.style.minHeight = "524px";
        }
        playSound();
        renderQuestion();
      }

      function startTimer() {
        timeLeft = 20;
        document.getElementById("timer").textContent = timeLeft;

        timerInterval = setInterval(() => {
          timeLeft--;
          document.getElementById("timer").textContent = timeLeft;

          if (timeLeft <= 0) {
            clearInterval(timerInterval);
            nextQuestion();
          }
        }, 1000);
      }

      function renderQuestion() {
        playSound();

        const q = questions[currentQuestion];
        selectedAnswer = null;

        quizContainer.innerHTML = `
    ${q.image ? `<img src="${q.image}" class="quiz-image" alt="question image">` : ""}
    <div class="quiz-question">${q.question}</div>
    <div class="answers">
      ${q.answers
        .map(
          (a, index) => `
        <div class="answer" data-index="${index}">${a}</div>
      `,
        )
        .join("")}
    </div>
    <div class="timer">–û—Å—Ç–∞–ª–æ—Å—å: <span id="timer">20</span> —Å–µ–∫</div>
    <button class="next-btn" id="nextBtn">–î–∞–ª–µ–µ</button>
  `;

        document.querySelectorAll(".answer").forEach((el) => {
          el.addEventListener("click", () => {
            document
              .querySelectorAll(".answer")
              .forEach((a) => a.classList.remove("selected"));
            el.classList.add("selected");
            selectedAnswer = parseInt(el.dataset.index);
          });
        });

        document
          .getElementById("nextBtn")
          .addEventListener("click", nextQuestion);

        startTimer();
      }

      function nextQuestion() {
        clearInterval(timerInterval);

        if (selectedAnswer === questions[currentQuestion].correct) {
          score++;
        }

        currentQuestion++;

        if (currentQuestion < questions.length) {
          renderQuestion();
        } else {
          showResults();
        }
      }

      function showResults() {
        stopSound();

        if (window.innerWidth <= 600) {
          quizWrapper.style.minHeight = "auto";
        }

        quizContainer.innerHTML = `
    <div class="result">
      üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! <br><br>
      –í—ã –Ω–∞–±—Ä–∞–ª–∏ ${score} –∏–∑ ${questions.length} –±–∞–ª–ª–æ–≤
      <br><br>
      <button class="next-btn" onclick="showStartScreen()">–ü—Ä–æ–π—Ç–∏ —Å–Ω–æ–≤–∞</button>
    </div>
  `;

        launchConfetti();
      }

      function launchConfetti() {
        const canvas = document.getElementById("confetti");
        const ctx = canvas.getContext("2d");

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const pieces = [];
        for (let i = 0; i < 180; i++) {
          pieces.push({
            x: Math.random() * canvas.width,
            y: Math.random() * -canvas.height,
            size: Math.random() * 8 + 4,
            speed: Math.random() * 3 + 2,
            color: `hsl(${Math.random() * 360},100%,50%)`,
            rotation: Math.random() * 360,
          });
        }

        function update() {
          ctx.clearRect(0, 0, canvas.width, canvas.height);

          pieces.forEach((p) => {
            p.y += p.speed;
            p.rotation += 5;

            ctx.save();
            ctx.translate(p.x, p.y);
            ctx.rotate((p.rotation * Math.PI) / 180);
            ctx.fillStyle = p.color;
            ctx.fillRect(-p.size / 2, -p.size / 2, p.size, p.size);
            ctx.restore();
          });

          requestAnimationFrame(update);
        }

        update();

        setTimeout(() => {
          ctx.clearRect(0, 0, canvas.width, canvas.height);
        }, 5000);
      }

      showStartScreen();
    </script>
  </body>
</html>
